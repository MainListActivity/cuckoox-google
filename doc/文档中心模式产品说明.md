# 文档中心模式产品说明

## 概述

文档中心模式是 CuckooX 破产案件管理平台的一种特殊页面布局模式，专为文档编辑和审阅场景设计。该模式提供沉浸式的文档编辑体验，同时保持案件信息的可访问性和文档协作功能。

## 设计理念

### 1. 以文档为中心
- 文档编辑器占据页面主要区域，提供最大的编辑空间
- 减少界面干扰，让用户专注于内容创作和编辑

### 2. 上下文信息可视化
- 左侧悬浮面板展示案件基本信息和流转状态
- 确保用户在编辑文档时能够快速了解案件背景

### 3. 协作编辑支持
- 右侧动态评论区域，支持对文档特定段落进行评论
- 实时协作编辑，多人同时工作

### 4. 自适应布局
- 菜单自动收起，释放更多编辑空间
- 用户可随时展开菜单访问其他功能模块

## 功能特性

### 🎯 核心功能

#### 1. 自动菜单管理
- **自动收起**: 进入文档编辑页面时自动收起左侧导航菜单
- **手动展开**: 用户可通过菜单按钮随时展开菜单，访问其他页面
- **状态保持**: 离开文档页面时恢复正常菜单显示状态

#### 2. 三栏布局设计
```
┌─────────────────────────────────────────────────────────────┐
│                     顶部工具栏                                │
├───────┬─────────────────────────────────────┬───────────────┤
│       │                                     │               │
│ 案件  │           文档编辑区域                │    评论区域    │
│ 信息  │                                     │   (按需显示)   │
│ 面板  │                                     │               │
│       │                                     │               │
└───────┴─────────────────────────────────────┴───────────────┘
```

#### 3. 案件信息悬浮面板 (左侧)
- **基本信息展示**:
  - 案件名称和编号
  - 案件负责人
  - 案件程序类型
  - 受理时间
  - 当前阶段

- **流转状态时间线**:
  - 案件受理
  - 首次公告
  - 债权申报开始/截止
  - 债权人会议
  - 重整裁定
  - 案件办结

- **交互特性**:
  - 支持折叠/展开
  - 悬浮显示，不遮挡编辑区域
  - 响应式设计，移动端自动调整

#### 4. 文档编辑区域 (中央)
- **全屏编辑支持**: 一键进入全屏模式，获得最大编辑空间
- **Google文档风格**: 现代化UI设计，符合用户使用习惯
- **协作编辑**: 实时显示其他用户的编辑状态和光标位置
- **富文本功能**: 完整的格式化工具栏，支持图片、附件上传
- **自动保存**: 内容变更自动保存到数据库

#### 5. 评论区域 (右侧)
- **段落级评论**: 用户可以对文档中的特定段落进行评论
- **实时通知**: 新评论实时推送给相关用户
- **按需显示**: 只有存在评论时才显示该区域
- **回复功能**: 支持评论的回复和讨论

### 🎨 视觉设计

#### 1. 色彩方案
- **主色调**: Teal色系 (#00897B)，体现专业和信任
- **背景色**: 亮色模式 #f6f6f6，深色模式对应颜色
- **强调色**: 用于高亮重要信息和交互元素

#### 2. 布局特点
- **流体布局**: 根据内容动态调整区域大小
- **最小侵入**: 悬浮面板设计，最大化文档编辑空间
- **一致性**: 与整体系统设计语言保持一致

#### 3. 响应式适配
- **桌面端**: 三栏布局，充分利用屏幕空间
- **平板端**: 两栏布局，案件信息可折叠
- **移动端**: 单栏布局，通过标签页切换不同区域

## 应用场景

### 1. 立案材料编辑
- 案件详情页面的立案材料编辑
- 提供案件基本信息和时间线参考
- 支持多人协作编辑和审核

### 2. 债权申报材料
- 债权人申报债权时的附件材料编辑
- 显示债权相关信息和申报状态
- 支持管理人员评论和反馈

### 3. 会议纪要编辑
- 债权人会议纪要的编辑和记录
- 展示会议相关信息和参与人员
- 支持实时协作记录

### 4. 其他文档场景
- 重整计划文档
- 财产分配方案
- 法律文书模板等

## 技术实现要点

### 1. 布局控制
- 监听路由变化，自动控制菜单显示状态
- 使用 React Context 管理全局布局状态
- CSS Flexbox 实现灵活的三栏布局

### 2. 状态管理
- 菜单折叠状态与页面路由联动
- 文档编辑状态的实时同步
- 评论数据的动态加载和更新

### 3. 性能优化
- 组件懒加载，按需渲染评论区域
- 文档内容的增量更新
- 防抖处理用户输入，减少API调用

### 4. 协作功能
- WebSocket 实现实时协作编辑
- SurrealDB 的 LIVE 查询功能
- 冲突检测和解决机制

## 用户体验亮点

### 1. 渐进式披露
- 默认隐藏不常用的界面元素
- 根据用户操作逐步展现相关功能
- 保持界面简洁，专注核心任务

### 2. 智能适配
- 根据屏幕大小自动调整布局
- 根据内容类型显示相关信息
- 根据用户权限控制可用功能

### 3. 流畅交互
- 平滑的动画过渡效果
- 即时的视觉反馈
- 符合直觉的操作逻辑

## 实施计划

### 阶段一: 基础布局 (已完成)
- ✅ 实现基本的三栏布局
- ✅ 左侧案件信息面板
- ✅ 中央文档编辑区域

### 阶段二: 菜单控制
- 🔄 自动菜单收起/展开逻辑
- 🔄 路由联动菜单状态
- 🔄 全局状态管理

### 阶段三: 评论系统
- 📋 右侧评论区域设计
- 📋 段落级评论功能
- 📋 实时评论通知

### 阶段四: 优化完善
- 📋 性能优化
- 📋 移动端适配
- 📋 用户体验优化

## 总结

文档中心模式是 CuckooX 平台的重要创新功能，它将传统的系统界面转变为以内容为中心的协作环境。通过智能的布局控制、丰富的上下文信息和强大的协作功能，为用户提供了前所未有的文档编辑体验。

这种设计不仅提高了工作效率，还加强了团队协作，是现代数字化办公的典型应用场景。随着功能的不断完善，文档中心模式将成为破产案件管理的标准工作方式。 