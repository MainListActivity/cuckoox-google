# 产品功能说明文档：破产案件全生命周期管理平台

## 1. 引言

### 1.1 产品定位
本产品旨在为破产案件管理人提供一个全面的、高效的案件管理和分析平台。平台支持对破产案件的整体流程和全生命周期进行精细化管理，包括但不限于案件立案、债权申报、债权审核、会议管理、以及通过数据可视化大屏进行案件数据分析。

### 1.2 目标用户
*   案件管理人及其团队成员
*   债权人
*   法院及相关监管机构（间接）
*   系统管理员 (admin)

### 1.3 设计原则
*   **高效易用**：简化操作流程，提供直观的用户界面。
*   **数据驱动**：强调数据的实时性和准确性，为决策提供支持。
*   **流程规范**：遵循《中华人民共和国企业破产法》等相关法律法规，规范案件处理流程。
*   **安全可靠**：保障用户数据安全和系统稳定运行。

## 2. 全局功能与规则

### 2.1 用户认证与授权

#### 2.1.1 用户登录
用户登录系统支持两种主要方式，并根据URL参数及用户历史行为进行案件选择和界面初始化：

1.  **GitHub OIDC 登录 (默认模式):**
    *   用户通过后端 Quarkus 提供的 OIDC 服务通过 GitHub 账户授权登录。
    *   登录成功后，系统将按以下顺序判断和选择案件：
        *   **URL中带有案件编号 (`case=案件ID`):**
            *   系统首先校验用户是否拥有访问 `case=案件ID` 所指定案件的权限。
            *   **有权限:** 无论用户此前是否在 `surrealdb` 中有已选案件记录，URL中指定的 `case=案件ID` 具有最高优先级。系统将直接尝试进入该案件，并将此 `案件ID` 更新为用户在 `surrealdb` 中的最后一次选择。
            *   **无权限:** 若用户对 `case=案件ID` 无访问权限，系统将忽略此参数，并按后续“URL中不带案件编号”的逻辑处理。
        *   **URL中不带案件编号:**
            *   **用户此前已在 `surrealdb` 中记录了最后选择的案件:** 系统将直接使用该 `surrealdb` 中记录的案件。
            *   **用户此前未选择过案件 (或 `surrealdb` 中记录无效) 且仅参与一个案件:** 系统将自动选择该案件，并将此选择记录到 `surrealdb` 中。
            *   **用户此前未选择过案件 (或 `surrealdb` 中记录无效) 且参与了多个案件:** 系统将引导用户进入“案件管理”页面，要求用户手动选择一个案件。用户的该次选择将被记录在 `surrealdb` 中，作为后续登录的默认案件。
    *   **进入系统后的操作:** 成功确定并进入案件后，系统立即执行以下操作：
        *   查询用户在当前案件下拥有的身份（角色）。这些身份及其权限配置来源于“身份管理”模块。
        *   根据用户身份及其关联的菜单权限，动态渲染用户可操作的菜单列表。
        *   菜单列表渲染完成后，系统自动选中并打开用户有权访问的第一个菜单项。

2.  **SurrealDB 直接登录 (管理员模式):**
    *   当访问链接中包含 `admin=true` 参数时 (例如 `cuckoox.cn/signin?admin=true`)，系统将绕过 GitHub OIDC 登录流程。
    *   用户可使用预设的用户名和密码通过 `surrealdb` 直接登录。此模式主要供预置的 `admin` 账号使用，通常拥有最高系统权限。
    *   登录并（如果适用）选择案件后，后续的身份查询、菜单渲染及自动打开第一个菜单项的逻辑与 GitHub OIDC 登录模式一致。

#### 2.1.2 身份与权限管理
*   系统预置 `admin` 超级管理员账号，拥有完整的系统配置权限。
*   `admin` 账号具备在“身份管理”模块中进行全面配置的能力，包括：
    *   创建和管理不同的用户身份（角色），例如：案件负责人、协办律师、债权审核员等。
    *   为每种身份（角色）精确定义其可以访问和操作的菜单项。
    *   为每个菜单项配置具体的操作权限（如：增、删、改、查等）。
*   用户登录系统并确定操作案件后（如2.1.1所述），其所见和所能操作的功能完全取决于“身份管理”模块中针对其身份的这些预设配置。

#### 2.1.3 案件选择
*   用户首次登录或未选择案件时，若参与多个案件，需在案件管理页面选择一个案件方可进入系统其他功能模块。
*   用户的案件选择会被持久化存储在 `surrealdb` 中，后续登录默认加载上次选择的案件。
*   用户可在案件管理页面切换当前操作的案件（如果参与多个案件）。

### 2.2 通用组件与技术栈
*   **数据库**: `surrealdb` 用于存储案件数据、用户数据、债权信息、权限配置、实时消息等。
*   **文件存储**: 支持 S3 协议的 `minio` 用于存储附件材料中的图片及其他文件。
*   **富文本编辑器**: `quilljs` 与 `surrealdb` 结合，用于实现立案材料、债权附件材料等的实时在线编辑功能。文档中的图片直接在编辑器中预览，其他文件类型支持下载。
*   **实时消息**: 利用 `surrealdb` 的实时消息能力，实现数据大屏等功能的实时数据更新。

## 3. 功能模块详述

### 3.1 案件管理 (Case Management)

#### 3.1.1 模块目标
管理人能够创建、查看、编辑和管理破产案件，跟踪案件程序进程，并根据案件状态进行相应操作。

#### 3.1.2 权限控制
*   用户是否拥有对案件的写操作权限由其身份（角色）决定。
*   无写权限用户仅能查看案件列表和案件详情，无法进行创建、修改状态等操作。
*   特定操作（如录入债权人、发布公告、修改案件状态）仅受身份权限管控，不受案件程序进程限制。
*   其他菜单的可见性和可操作性同时受身份权限和当前案件的程序进程管控。

#### 3.1.3 案件程序进程与提醒
案件程序进程严格按照《中华人民共和国企业破产法》规定流转。系统在法院指定管理人后，由管理人录入案件。案件录入后，系统将创建一个与该案件关联的“案件机器人”账号，在消息中心向关注了该机器人的用户（通常为案件相关方）发送卡片消息提醒。

**提醒规则表：**

| 状态           | 提示时间                      | 提示频率    | 提示内容                                           |
|----------------|---------------------------|-------------|----------------------------------------------------|
| 立案           | 受理时间+25天-当前时间 <= 5天 | 每天上午10点 | “距离最迟公告时间仅有 {x} 天”                         |
| 公告           | 公告时间+30天-当前时间 <= 3天 | 每天上午10点 | “距离开始债权申报时间还有 {x} 天”                     |
| 债权申报       | 公告时间+3月-当前时间 <= 3天  | 每天上午10点 | “距离债权申报截止还有 {x} 天”                         |
| 债权人第一次会议 | 债权申报截止时间+15日-当前时间 <= 3天 | 每天上午10点 | “距离第一次债权人会议截止时间还有 {x} 天”               |
| 裁定重整       | 裁定重整时间+6月-当前时间 <= 5天  | 每天上午10点 | “距离提交重整计划截止时间还有 {x} 天，超时未提交将宣告破产清算” |
| 延迟提交重整计划 | 延迟提交重整计划时间+3月-当前时间 <= 5天 | 每天上午10点 | “距离提交重整计划截止时间还有 {x} 天，超时未提交将宣告破产清算” |
| 债权人第二次会议 | 提交重整计划时间+15日-当前时间 <= 3天 | 每天上午10点 | “距离第二次债权人会议通知截止时间还有 {x} 天”           |

#### 3.1.4 案件列表
*   **展示字段:**
    *   案件编号 (系统生成/手动输入)
    *   案件负责人 (用户选择)
    *   案件程序 (枚举：默认破产，可选其他)
    *   受理时间 (日期选择)
    *   程序进程 (枚举值：立案、公告、债权申报、债权人第一次会议、裁定重整、提交重整计划、延迟提交重整计划、债权人第二次会议、破产清算、结案)
    *   创建人 (系统记录)
    *   立案材料 (链接，点击可查看 `quilljs` 文档)
*   **操作 (工具栏):**
    *   **创建案件:** (仅有权限用户可见)
        *   输入字段：
            *   案件负责人 (从系统用户中选择)
            *   案件程序 (下拉选择，默认“破产”)
            *   受理时间 (日期选择器)
        *   当“案件程序”为“破产”时，额外录入（所有时间字段均为可选，可清空）：
            *   公告时间：默认填入“受理时间后25日”，并提示“最迟受理破产申请之日起25日”。
            *   债权申报开始时间：如有公告时间，默认填入“公告时间后30日”，并提示“最早发布受理破产申请公告之日30日”。
            *   债权申报截止时间：如有公告时间，默认填入“公告时间后3个月”，并提示“最迟发布受理破产申请公告之日3个月”。
        *   创建案件后，默认状态为“立案”。
        *   成功创建案件后，系统自动在消息中心创建一个与该案件ID关联的机器人账号，用于后续发送案件进程提醒。
*   **操作 (单条数据):**
    *   **查看详情:**
        *   点击后进入案件详情页面。
        *   左侧固定展示案件基本信息（案件编号、负责人、程序、受理时间等）和关键时间点信息（以时间轴方式串联展示，如受理时间、公告时间、债权申报起止时间、会议时间、裁定时间、计划提交时间、结案时间等）。
        *   主区域展示“立案材料”详情 (`quilljs` 文档，仅查看不可编辑)。
    *   **修改状态:** (仅有权限用户可见)
        *   状态的修改选项依赖于当前案件的程序进程。
        *   在任何阶段均可操作“结案”，并需设置结案时间。
        *   状态流转逻辑及处理：

        | 当前状态         | 可修改为         | 修改契机                                | 处理逻辑                                                                 |
                |------------------|------------------|-----------------------------------------|--------------------------------------------------------------------------|
        | 立案             | 公告             | 通过平台的打印公告快递单号、在案件管理手动修改 | 1. 更新案件状态为“公告”。<br>2. 记录/更新案件的“公告时间”。                       |
        | 公告             | 债权申报         | 手动修改                                | 1. 更新案件状态为“债权申报”。<br>2. 记录/更新“债权申报开始时间”。                 |
        | 债权申报         | 债权人第一次会议 | 手动修改                                | 1. 更新案件状态为“债权人第一次会议”。<br>2. 记录/更新“债权申报截止时间”。             |
        | 债权人第一次会议 | 破产清算         | 手动修改                                | 1. 更新案件状态为“破产清算”。<br>2. 记录“债权人第一次会议时间”。                   |
        | 债权人第一次会议 | 裁定重整         | 手动修改                                | 1. 更新案件状态为“裁定重整”。<br>2. 记录“债权人第一次会议时间”。<br>3. 记录“裁定重整时间”。<br>4. 需在页面提交“裁定重整公告”（`quilljs`文档，形式同立案材料）。 |
        | 裁定重整         | 提交重整计划     | 手动修改                                | 1. 更新案件状态为“提交重整计划”。<br>2. 记录“重整计划提交时间”。<br>3. 需在页面提交“重整计划”（`quilljs`文档）。 |
        | 裁定重整         | 延迟提交重整计划 | 手动修改                                | 1. 更新案件状态为“延迟提交重整计划”。<br>2. 记录“延迟提交重整计划时间”。             |
        | 提交重整计划     | 债权人第二次会议 | 手动修改                                | 1. 更新案件状态为“债权人第二次会议”。                                       |
        | 延迟提交重整计划 | 债权人第二次会议 | 手动修改                                | 1. 更新案件状态为“债权人第二次会议”。                                       |
    *   **会议纪要:** (仅有权限用户可见)
        *   当案件程序进程处于“债权人第一次会议”或“债权人第二次会议”期间，操作栏显示“填写会议纪要”按钮。
        *   点击后，允许用户使用 `quilljs` 编辑器录入并保存对应会议的会议纪要。纪要与特定会议关联。

#### 3.1.5 菜单访问与案件状态关联
用户可操作的菜单除了受身份权限管控外，还会受到案件程序进程的管控。

| 案件状态 (程序进程) | 允许的特定操作/可访问模块                               | 其他限制说明                                                                 |
|-------------------|----------------------------------------------------|------------------------------------------------------------------------------|
| (任何状态)        | 债权人管理 (录入、打印快递单), 发布公告, 案件管理 (修改状态) | 这些操作仅受身份权限管控，不受案件状态限制。                                         |
| 债权申报          | 债权申报 (债权人), 债权审核 (管理人)                   | 当债权人A提交了债权后，该债权对A变为只读，除非管理人B驳回该债权，A才可再次编辑。          |
| 债权人第一次会议  | 在线会议                                           |                                                                              |
| 债权人第二次会议  | 在线会议                                           |                                                                              |

### 3.2 债权人管理 (Creditor Management)

#### 3.2.1 模块目标
管理人能够录入、管理案件的债权人信息，并进行相关操作。

#### 3.2.2 自动导航
当案件程序处于“立案”阶段时，拥有“债权人管理”权限的用户进入系统后，系统将自动导航至“债权人管理”菜单。

#### 3.2.3 功能详述
*   **页面布局:** 主要为债权人列表，包含搜索、添加、批量导入、打印等操作。
*   **添加单个债权人:**
    *   表单字段：
        *   类别 (选择：组织/个人)
        *   名称 (文本输入)
        *   ID (文本输入，组织对应统一社会信用代码，个人对应身份证号)
        *   联系人姓名 (文本输入)
        *   联系方式 (文本输入，如电话、邮箱)
        *   地址 (文本输入)
        *   (其他管理人需要的自定义字段)
    *   保存后，债权人信息显示在列表中。
*   **批量导入债权人:**
    *   支持通过上传特定格式的 Excel 或 CSV 文件批量导入债权人信息。
    *   提供模板下载功能。
    *   导入时进行数据校验，并给出成功/失败的反馈。
*   **打印快递单号:**
    *   管理人可以在债权人列表中勾选一个或多个债权人。
    *   点击“打印快递单号”按钮。
    *   系统应能生成包含所选债权人姓名、地址等信息的快递单打印格式，或与第三方快递单打印服务集成。
    *   (此功能可能需要进一步明确打印的具体内容和格式，或是否对接外部系统)。
*   **债权人列表展示字段:**
    *   选择框
    *   序号
    *   类别 (组织/个人)
    *   名称
    *   ID (统一社会信用代码/身份证号)
    *   联系人姓名
    *   联系方式
    *   地址
    *   操作 (编辑、删除等)

### 3.3 债权申报 (Claim Submission by Creditor)

#### 3.3.1 模块目标
债权人能够通过系统方便地申报其对破产企业的债权，并提交相关证明材料。这些附件材料是证明债权有效性的核心依据。此模块主要面向债权人用户。

#### 3.3.2 权限与访问
*   仅当案件程序进程处于“债权申报”阶段时，拥有债权申报权限的债权人用户才能访问此模块并进行申报。
*   债权人只能查看和编辑自己申报的债权（在管理人审核前或驳回后）。

#### 3.3.3 申报流程
1.  **录入基本债权信息:**
    *   债权人进入“债权申报”模块，点击“新增申报”或类似按钮。
    *   页面要求填写以下信息：
        *   债权性质 (下拉选择，如：普通债权、有财产担保债权、劳动报酬等，选项由admin在后台配置)
        *   本金 (金额输入)
        *   利息 (金额输入，可为0)
        *   其他费用 (金额输入，可为0，如违约金、损害赔偿金等)
        *   债权总额 (只读，由 本金 + 利息 + 其他费用 自动计算并显示)
        *   币种 (下拉选择，如 CNY, USD 等)
        *   简要说明 (文本域，可选)
    *   点击“保存并下一步（编辑附件）”按钮。此时债权基本信息已保存，但状态为“草稿”或“待提交附件”。

2.  **编辑附件材料:**
    *   系统导航至新的路由（或在当前页面展开附件编辑区）。
    *   页面核心为 `quilljs` 富文本编辑器，用于债权人详细陈述债权事实、理由，并上传证明材料。
    *   **编辑器功能:**
        *   支持文字编辑、格式化。
        *   支持实时上传图片到 `minio`，图片在文档中直接预览。
        *   支持上传其他类型文件（如 PDF, Word, Excel 等）作为附件，这些文件在编辑器中以链接或图标形式展示，点击可下载。
        *   所有编辑内容和附件信息实时（或定时）保存到 `surrealdb`。
    *   页面需清晰展示已录入的债权基本信息（如债权总额）供参考。
    *   提供“返回修改基本信息”、“保存草稿”、“提交申报”按钮。

3.  **提交申报:**
    *   债权人完成附件材料编辑后，点击“提交申报”按钮。
    *   系统进行最终校验（如必要字段是否完整）。
    *   提交成功后，该债权状态变更为“待审核”。
    *   一旦提交，债权人对此债权变为只读权限，除非管理人驳回该债权申请，债权人才可重新编辑。

#### 3.3.4 债权列表 (债权人视角)
*   债权人可查看自己申报的所有债权列表。
*   列表字段：债权编号、申报时间、债权性质、主张债权总额、审核状态、审核意见（如有）。
*   操作：查看详情、撤回（仅在管理人未审核前）、编辑（仅在草稿状态或被驳回后）。

### 3.4 债权审核 (Claim Review by Administrator)

#### 3.4.1 模块目标
管理人能够对债权人申报的债权进行审核、确认或驳回，并管理所有已申报的债权。

#### 3.4.2 自动导航
当案件程序进入“债权申报”阶段时，用户进入系统发现有“债权审核”的权限，则自动进入债权审核菜单。

#### 3.4.3 债权列表 (管理人视角)
*   **展示字段:**
    *   **债权人信息 (根据债权人ID聚合数据):**
        *   类别 (组织/个人)
        *   姓名/名称
        *   ID (统一社会信用代码/身份证号)
    *   **联系人信息:**
        *   联系人姓名
        *   联系方式
    *   **债权基本信息:**
        *   债权编号 (系统自动生成，全局唯一或案件内唯一)
    *   **主张债权:**
        *   债权性质
        *   本金
        *   利息
        *   其他费用
        *   债权总额 (自动计算)
        *   附件材料 (链接，点击进入详情/审核页面)
    *   **审核认定债权:** (审核后填写)
        *   债权性质
        *   本金
        *   利息
        *   其他费用
        *   债权总额 (自动计算)
        *   附件材料 (如有管理人补充的材料，链接)
    *   **审核信息:**
        *   审核人 (系统记录当前操作的管理人)
        *   审核状态 (如：待审核、审核通过、部分通过、驳回、补充材料。状态由 `admin` 在“审核状态管理”中维护)
        *   审核时间
        *   审核意见/备注
*   **列表查询:**
    *   支持输入关键字（如债权人名称、债权编号、联系人等）对债权进行全文检索。
    *   可根据审核状态、债权性质等进行筛选。
    *   点击搜索按钮执行查询。

#### 3.4.4 页面操作 (列表工具栏)
1.  **创建债权 (管理人代报):** (在某些情况下，管理人可能需要代替债权人录入债权)
    *   点击“创建债权”按钮。
    *   弹出表单，需输入：
        *   **债权人信息:**
            *   类别 (组织/个人)
            *   姓名/名称
            *   ID (统一社会信用代码/身份证号)
        *   **联系人信息:**
            *   联系人姓名
            *   联系方式
        *   **主张债权信息:**
            *   债权性质 (同债权人申报)
            *   本金
            *   利息
            *   其他费用
            *   (债权总额自动计算)
    *   点击“保存并编辑附件材料”后，进入与债权人申报时类似的 `quilljs` 附件材料编辑页面。保存后，该债权直接进入“待审核”或管理人指定的初始状态。
2.  **批量驳回:**
    *   在列表中勾选一个或多个“待审核”状态的债权。
    *   点击“批量驳回”按钮。
    *   弹出确认框，可输入统一的驳回理由。
    *   确认后，所选债权状态变更为“已驳回”，并将驳回理由记录到每条债权的审核意见中。债权人会收到通知，并可以重新编辑申报。

#### 3.4.5 债权操作 (针对单条数据的操作)
*   **审核债权:**
    *   点击列表中某条“待审核”或需要复审的债权的操作按钮“审核”。
    *   进入债权审核详情路由。
    *   **页面布局:**
        *   **左侧固定区域:** 展示债权人申报的“主张债权信息”（包括债权性质、本金、利息、其他、总额）和债权人、联系人信息。此区域信息为只读。
        *   **右侧主区域:** 展示债权人申报时提交的“附件材料” (`quilljs` 文档内容)。
            *   管理人可对附件材料中的段落、文字、图片添加评论/批注。批注内容与原文关联高亮显示。
            *   管理人对附件材料做出的任何修改（如高亮、划线、补充说明）应自动保存，并支持展示附件材料的变更记录 (版本历史)。图片存储在 `minio`。
    *   **审核操作悬浮按钮:**
        *   页面右下角有一个悬浮的“审核”按钮。
        *   点击“审核”按钮，弹出审核信息输入框/表单：
            *   **必填项:**
                *   **审核认定债权性质:** (下拉选择，可与主张性质不同)
                *   **审核认定本金:** (金额输入)
                *   **审核认定利息:** (金额输入)
                *   **审核状态:** (下拉选择，选项来源于 `admin` 在“审核状态管理”中维护的列表，如：审核通过、部分通过、驳回、要求补充材料等)
            *   **可选输入项:**
                *   **审核认定其他费用:** (金额输入)
                *   **审核意见/备注:** (文本域)
                *   **管理人补充附件材料:** (可选，允许管理人上传补充的 `quilljs` 文档或文件)
            *   输入完成后，“审核认定债权总额”根据认定的本金、利息、其他费用自动计算并醒目提示用户。
            *   页面下方为“提交审核”和“取消”按钮。
            *   点击“提交审核”：系统提示用户“请再次确认认定的债权金额及信息后提交”。用户确认后，保存审核结果，更新债权状态、审核人、审核时间等信息。
            *   点击“取消”：关闭弹窗，回到债权列表页面，已输入但未提交的审核信息不保存。

### 3.5 债权申报数据大屏 (Claim Submission Dashboard)

#### 3.5.1 模块目标
为管理人提供一个直观、实时的数据可视化界面，用于监控特定案件的债权申报和审核的整体情况。

#### 3.5.2 关联案件
大屏数据必须关联到一个具体的、当前用户选定的案件。

#### 3.5.3 实时数据监控
利用 `surrealdb` 的实时消息能力，监控以下数据的变化并实时更新到大屏：
*   **用户活动:**
    *   当前案件所有用户登录情况 (可根据用户身份进行分堆展示，如 管理人团队在线人数、债权人在线人数)。
    *   用户提交债权申请 (实时计数或动态列表)。
    *   用户进行债权审核 (通过/驳回的实时计数，确认债权的金额变化)。
    *   用户退出登录。
*   **债权统计 (金额):**
    *   当前申请的债权总金额 (实时累加)。
    *   当前已审批通过的债权总金额 (按管理人认定的金额实时累加)。
    *   当前待审的债权总金额。
*   **债权统计 (笔数):**
    *   当前申请的债权总笔数。
    *   当前已审批通过的债权总笔数。
    *   当前待审的债权总笔数。
*   **债权人统计:**
    *   当前已提交申请的债权人数量 (去重)。

#### 3.5.4 可视化要求
*   采用合理美观的图表类型，如折线图、柱状图、饼图、数字翻牌器、地图（如债权人地域分布，如有数据支持）等。
*   布局清晰，信息层级分明。
*   色彩搭配专业，符合业务场景。
*   关键指标醒目突出。
*   响应式设计，适应不同屏幕尺寸。

**建议图表：**
*   **核心指标卡片:** 申请总额、已审总额、待审总额、申请总笔数、已审总笔数、待审总笔数、申报债权人数。
*   **趋势图:** 每日/每周债权申报金额/笔数趋势（折线图/柱状图）。
*   **构成图:** 不同债权性质的金额/笔数占比（饼图/环形图）。
*   **审核进度:** 不同审核状态的债权笔数占比（饼图/条形图）。
*   **实时动态:** 最近提交的债权申请列表、最近完成的审核操作列表。
*   **用户在线分布图:** 按角色展示当前在线用户数。

### 3.6 在线会议 (Online Meetings)

#### 3.6.1 模块目标
提供一个集中的页面，用于查看当前案件相关的会议安排和已发生的会议记录。

#### 3.6.2 访问限制
*   仅当案件程序进程处于“债权人第一次会议”或“债权人第二次会议”等涉及会议的阶段时，此模块对有相应权限的用户可见和可操作。

#### 3.6.3 功能详述
*   **会议列表:**
    *   展示字段：会议名称、会议类型（如：债权人会议、内部讨论会）、计划开始时间、计划结束时间、状态（已安排、进行中、已结束、已取消）、参会链接（如果是在线会议系统）、会议纪要（链接）。
    *   操作：
        *   **安排新会议:** (管理人权限)
            *   输入会议名称、类型、时间、参会人员（可选，可从用户列表或债权人列表中选择）、会议议程（文本）、在线会议链接（如腾讯会议、Zoom等）。
        *   **编辑会议信息:** (管理人权限，对未开始的会议)
        *   **取消会议:** (管理人权限)
        *   **查看/编辑会议纪要:** (管理人权限，同案件管理模块的会议纪要功能，关联到具体会议)
*   **会议记录:**
    *   主要是已结束会议的列表，重点突出会议纪要的查阅。
    *   支持按会议名称、时间等进行搜索。

### 3.7 消息中心 (Message Center)

#### 3.7.1 模块目标
作为系统内即时通讯（IM）和系统通知的统一入口，确保用户不会错过重要信息。

#### 3.7.2 功能详述
*   **界面布局:**
    *   通常分为两栏或多栏：左侧为消息列表（区分IM会话和系统通知）、右侧为具体消息内容展示区。
*   **IM 聊天消息:**
    *   支持用户间（如管理人团队内部）的点对点聊天或群组聊天。
    *   显示未读消息数。
    *   消息类型：文本、图片、文件。
    *   （此功能若复杂，可考虑初期简化或集成第三方IM SDK）。
*   **系统提醒:**
    *   **案件机器人提醒:**
        *   展示由案件机器人根据案件程序进程（如3.1.3 案件程序进程与提醒 表中所列）发送的卡片消息。
        *   消息应包含案件名称、提醒内容、相关时间节点，并可能提供快速操作链接（如“查看案件详情”）。
    *   **业务操作通知:**
        *   例如：债权被审核通过/驳回的通知（给债权人）。
        *   新的债权申报待审核的通知（给管理人）。
        *   会议安排/变更通知。
        *   其他关键业务节点的操作结果通知。
    *   **通知管理:**
        *   标记已读/未读。
        *   按类型筛选通知。
        *   删除通知（或自动归档过期通知）。

### 3.8 身份管理 (Role Management - Admin Function)

#### 3.8.1 模块目标
由系统超级管理员 (`admin`) 配置系统中的用户身份（角色）及其权限。

#### 3.8.2 功能详述
*   **角色列表:** 展示系统中所有角色及其描述。
*   **创建/编辑角色:**
    *   输入角色名称（如：案件负责人、协办律师、债权审核员、普通债权人等）。
    *   为角色分配菜单权限：以树状或列表形式展示所有系统菜单及子菜单，管理员可勾选该角色能够访问的菜单。
    *   为角色分配操作权限：针对每个可访问的菜单或功能点，配置具体的增删改查（CRUD）等操作权限。
    *   保存角色配置。
*   **用户分配角色:** (通常在用户管理模块中，或在此处关联)
    *   将系统用户与一个或多个角色关联（需考虑单一案件单一角色或多角色）。

### 3.9 审核状态管理 (Review Status Management - Admin Function)

#### 3.9.1 模块目标
由系统超级管理员 (`admin`) 维护债权审核时可选的审核状态。

#### 3.9.2 功能详述
*   **状态列表:** 展示所有已定义的审核状态及其描述。
*   **添加/编辑/删除状态:**
    *   管理员可以自定义债权审核的下拉选项，如“审核通过”、“信息不全驳回”、“主体不适格驳回”、“要求补充材料”等。
    *   这些状态将用于债权审核模块的“审核状态”下拉选择框中。

## 4. 非功能性需求 (简述)
*   **性能:** 系统响应迅速，列表加载、数据查询、文档打开不应有明显延迟。实时数据大屏更新流畅。
*   **安全性:** 严格的身份认证和权限控制，数据传输加密，防止SQL注入等常见安全漏洞。附件存储安全。
*   **可靠性:** 系统稳定运行，数据备份和恢复机制健全。
*   **易用性:** 界面直观，操作符合用户习惯，减少学习成本。
*   **可扩展性:** 系统架构设计应考虑未来功能模块的增加和业务逻辑的迭代。

## 5. 数据模型概要 (核心实体)
*   **User:** 用户信息，GitHub OIDC 关联信息或 SurrealDB 用户名密码。
*   **Case:** 案件信息，包括基本属性、时间节点、程序进程、立案材料等。
*   **CaseRoleAssignment:** 用户在特定案件中的角色。
*   **Creditor:** 债权人信息。
*   **Claim:** 债权申报信息，包括主张债权详情、附件材料、审核认定详情。
*   **ClaimComment:** 债权审核时的评论/批注。
*   **DocumentVersion:** `quilljs` 文档的版本历史。
*   **Role:** 身份/角色定义。
*   **Menu:** 菜单项定义。
*   **Permission:** 角色与菜单/操作的权限关联。
*   **Meeting:** 会议信息，包括会议纪要。
*   **Message:** 消息中心的消息。
*   **NotificationRule:** 案件机器人通知规则。
*   **AuditStatus:** 审核状态定义。

*(注：详细的数据库表结构设计需另行文档化)*


## 6. 产品路线图

### 6.1 第一阶段（基础版）
- 用户登录
- 案件管理基础功能
- 债权申报与审核
- 基础数据大屏
- 多语言支持

### 6.2 第二阶段（标准版）
- 在线会议功能
- 消息中心完善
- 高级数据分析
- 批量处理优化

### 6.3 第三阶段（高级版）
- AI辅助审核
- 移动端适配


## 7. 附录

### 7.1 术语表
- **破产管理人**：由人民法院指定的负责管理债务人财产和事务的机构或者人员
- **债权申报**：债权人向破产管理人申报其对债务人享有的债权的过程
- **债权审核**：破产管理人对债权人申报的债权进行审查确认的过程
- **重整计划**：为挽救债务人企业，对债务人的债权债务和经营活动等进行调整的计划

### 7.2 法律依据
- 《中华人民共和国企业破产法》
- 最高人民法院关于适用《中华人民共和国企业破产法》若干问题的规定
