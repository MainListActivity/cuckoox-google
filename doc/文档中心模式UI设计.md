# 文档中心模式 UI 设计文档

## 设计概览

文档中心模式采用现代化的三栏布局设计，专为文档编辑和协作场景优化。设计遵循 Material Design 3 规范，与项目整体的 Teal 主题保持一致。

## 设计规范

### 色彩系统

#### 主色调
- **Primary**: #00897B (Teal 600)
- **Primary Light**: #26A69A (Teal 300)
- **Primary Dark**: #00695C (Teal 800)

#### 辅助色彩
- **Secondary**: #5C6BC0 (Indigo 300)
- **Success**: #66BB6A (Green 400)
- **Warning**: #FF7043 (Deep Orange 400)
- **Error**: #EF5350 (Red 400)

#### 背景色彩
- **Light Mode Background**: #f6f6f6
- **Dark Mode Background**: #121212
- **Surface**: rgba(255, 255, 255, 0.95) / rgba(18, 18, 18, 0.95)

### 字体系统

#### 字体族
- **主字体**: Inter, -apple-system, BlinkMacSystemFont, sans-serif
- **代码字体**: 'Fira Code', 'Monaco', 'Consolas', monospace

#### 字体大小
- **H1 (页面标题)**: 2.5rem (40px)
- **H2 (区块标题)**: 2rem (32px)
- **H3 (小节标题)**: 1.5rem (24px)
- **Body1 (正文)**: 1rem (16px)
- **Body2 (辅助文本)**: 0.875rem (14px)
- **Caption (说明文字)**: 0.75rem (12px)

### 间距系统

#### 基础间距单位: 8px

- **XS**: 4px (0.5 unit)
- **SM**: 8px (1 unit)
- **MD**: 16px (2 units)
- **LG**: 24px (3 units)
- **XL**: 32px (4 units)
- **XXL**: 48px (6 units)

## 布局设计

### 整体布局结构

```
┌─────────────────────────────────────────────────────────────────────┐
│                           顶部工具栏 (64px)                           │
├─────────┬─────────────────────────────────────────┬─────────────────┤
│         │                                         │                 │
│  左侧   │                中央                      │      右侧       │
│ 信息面板 │             文档编辑区域                  │    评论区域      │
│ (280px) │              (自适应)                    │   (320px)      │
│         │                                         │    (按需)       │
│         │                                         │                 │
└─────────┴─────────────────────────────────────────┴─────────────────┘
```

### 响应式断点

#### 桌面端 (≥1200px)
- 三栏布局：左侧 280px + 中央自适应 + 右侧 320px
- 左侧面板默认展开，可手动折叠

#### 平板端 (768px - 1199px)
- 两栏布局：左侧可折叠 + 中央自适应 + 右侧浮层
- 评论区域改为浮层形式

#### 移动端 (<768px)
- 单栏布局：全屏文档编辑器
- 左侧信息和右侧评论通过底部标签页切换

## 组件设计详细规范

### 1. 顶部工具栏

#### 视觉特征
- **高度**: 64px
- **背景**: 与主页面背景一致 (#f6f6f6 / #121212)
- **边框**: 底部 1px 分割线 (rgba(0, 0, 0, 0.12))
- **阴影**: 无阴影，保持扁平化设计

#### 内容组织
```
┌──────┬────────────────────────────────────┬──────────────┐
│ 菜单 │            文档标题                │   操作按钮    │
│ 按钮 │        案件编号 (副标题)            │  用户头像     │
└──────┴────────────────────────────────────┴──────────────┘
```

#### 交互状态
- **菜单按钮**: 
  - 默认: mdiMenu 图标 (24px)
  - Hover: 背景 rgba(0, 137, 123, 0.08)
  - Active: 背景 rgba(0, 137, 123, 0.12)

### 2. 左侧案件信息面板

#### 基本结构
- **宽度**: 280px (桌面端)
- **背景**: rgba(255, 255, 255, 0.95) 带 backdrop-filter: blur(10px)
- **圆角**: 12px
- **阴影**: 0px 4px 20px rgba(0, 0, 0, 0.08)
- **位置**: 悬浮在文档左侧，距离边缘 16px

#### 内容分区

##### 2.1 案件基本信息区
```
┌─────────────────────────────────────┐
│  📁 案件头像   案件名称              │
│             案件编号 (副标题)        │
├─────────────────────────────────────┤
│  👤 案件负责人: 张三                │
│  ⚖️  案件程序: 破产清算             │
│  📅 受理时间: 2024-01-15           │
│  📋 当前阶段: [债权申报]            │
└─────────────────────────────────────┘
```

- **头像设计**: 40x40px 圆形，背景色为主色调，显示"案"字
- **信息行高**: 32px，图标 16px，文字 14px
- **状态标签**: Chip 组件，主色调背景

##### 2.2 时间线区域
```
┌─────────────────────────────────────┐
│              关键时间节点            │
├─────────────────────────────────────┤
│  ● 2024-01-15  案件受理             │
│  │                                 │
│  ● 2024-02-10  首次公告             │
│  │                                 │
│  ● 2024-03-15  债权申报开始          │
│  │                                 │
│  ○ 2024-06-15  债权申报截止          │
└─────────────────────────────────────┘
```

- **时间线样式**: 左侧垂直线条，节点使用圆点
- **已完成节点**: 实心圆点，主色调
- **未完成节点**: 空心圆点，灰色
- **当前节点**: 放大圆点，加阴影效果

#### 交互设计
- **折叠按钮**: 面板右上角，使用 mdiChevronLeft/Right 图标
- **折叠状态**: 宽度缩减为 48px，只显示案件头像
- **展开动画**: 300ms ease-in-out 过渡

### 3. 中央文档编辑区域

#### 布局特征
- **宽度**: 100% - 左侧面板宽度 - 右侧面板宽度 (如有)
- **最大宽度**: 800px (A4纸张比例)
- **水平对齐**: 居中对齐
- **内边距**: 上下 24px，左右 auto

#### 编辑器样式
- **背景**: 纯白色 (#ffffff) / 深色模式 (#1e1e1e)
- **圆角**: 8px
- **阴影**: 0px 2px 12px rgba(0, 0, 0, 0.08)
- **边框**: 1px solid rgba(0, 0, 0, 0.12)

#### 工具栏设计
- **高度**: 56px
- **背景**: 与编辑器相同
- **分割线**: 底部 1px 边框
- **图标大小**: 20px
- **按钮间距**: 4px

#### 编辑区域
- **内边距**: 桌面端 48px，移动端 16px
- **行高**: 1.6
- **字体大小**: 16px
- **最小高度**: calc(100vh - 200px)

### 4. 右侧评论区域

#### 显示逻辑
- **默认隐藏**: 无评论时不显示
- **动态出现**: 存在评论时从右侧滑入
- **宽度**: 320px (桌面端)

#### 视觉设计
- **背景**: rgba(255, 255, 255, 0.95) 带 backdrop-filter
- **圆角**: 12px
- **阴影**: 0px 4px 20px rgba(0, 0, 0, 0.08)
- **位置**: 距离右边缘 16px

#### 评论卡片设计
```
┌─────────────────────────────────────┐
│  👤 张三  2024-01-15 14:30         │
│  对第3段的评论                       │
├─────────────────────────────────────┤
│  这段内容需要补充更多的法律依据...    │
│                                     │
│     💬 回复  👍 点赞              │
└─────────────────────────────────────┘
```

- **用户头像**: 32x32px 圆形
- **时间戳**: 12px 灰色文字
- **评论内容**: 14px 正文
- **操作按钮**: 16px 图标，水平排列

## 动画与过渡效果

### 1. 菜单收起/展开
- **持续时间**: 300ms
- **缓动函数**: cubic-bezier(0.4, 0.0, 0.2, 1)
- **变化属性**: width, margin-left

### 2. 面板折叠/展开
- **持续时间**: 250ms
- **缓动函数**: ease-in-out
- **变化属性**: width, opacity (内容)

### 3. 评论区域出现/消失
- **持续时间**: 400ms
- **缓动函数**: cubic-bezier(0.25, 0.46, 0.45, 0.94)
- **变化属性**: transform: translateX(), opacity

### 4. 悬停效果
- **持续时间**: 150ms
- **缓动函数**: ease-out
- **变化属性**: background-color, box-shadow, transform

## 状态设计

### 1. 加载状态
- **骨架屏**: 使用 Skeleton 组件模拟内容结构
- **加载指示器**: 24px CircularProgress，主色调
- **位置**: 各区域中央

### 2. 空状态
- **插图**: 使用 Material Design 风格的空状态图标
- **文案**: 简洁明了的引导文字
- **操作**: 提供相关的操作按钮

### 3. 错误状态
- **颜色**: 错误色 (#EF5350)
- **图标**: mdiAlertCircleOutline
- **操作**: 重试按钮

## 可访问性设计

### 1. 键盘导航
- **Tab 顺序**: 从左到右，从上到下
- **焦点指示**: 2px 实线边框，主色调
- **快捷键**: Cmd/Ctrl + / 展开/收起菜单

### 2. 屏幕阅读器
- **ARIA 标签**: 为所有交互元素添加适当的标签
- **角色定义**: region, main, complementary, navigation
- **状态通知**: 使用 aria-live 区域通知状态变化

### 3. 对比度
- **文字对比度**: 至少 4.5:1 (正文)，3:1 (大文字)
- **背景对比度**: 确保所有界面元素有足够的对比度
- **焦点指示**: 对比度至少 3:1

## 深色模式适配

### 色彩调整
- **背景色**: #121212 → #1e1e1e (面板背景)
- **文字色**: #ffffff → #e0e0e0 (主文字)
- **分割线**: rgba(255, 255, 255, 0.12)
- **阴影**: 使用更深的阴影值

### 组件适配
- **编辑器背景**: #1e1e1e
- **面板背景**: rgba(30, 30, 30, 0.95)
- **按钮样式**: 调整 hover 和 active 状态的透明度

## 实现技术要点

### 1. CSS 变量系统
```css
:root {
  --doc-center-sidebar-width: 280px;
  --doc-center-comment-width: 320px;
  --doc-center-header-height: 64px;
  --doc-center-panel-radius: 12px;
  --doc-center-transition: 300ms cubic-bezier(0.4, 0.0, 0.2, 1);
}
```

### 2. 响应式查询
```css
@media (max-width: 1199px) { /* 平板端 */ }
@media (max-width: 767px) { /* 移动端 */ }
```

### 3. 布局实现
- **CSS Grid**: 主要布局结构
- **Flexbox**: 面板内部布局
- **Position**: 悬浮面板定位

### 4. 性能优化
- **CSS 变换**: 优先使用 transform 而非布局属性
- **will-change**: 为动画元素添加合适的提示
- **层叠上下文**: 合理管理 z-index

## 组件库扩展

### 新增组件

#### 1. DocumentCenterLayout
```typescript
interface DocumentCenterLayoutProps {
  children: React.ReactNode;
  caseInfo?: CaseInfo;
  comments?: Comment[];
  onMenuToggle?: (isOpen: boolean) => void;
}
```

#### 2. CaseInfoPanel
```typescript
interface CaseInfoPanelProps {
  caseInfo: CaseInfo;
  timeline: TimelineEvent[];
  collapsed?: boolean;
  onToggle?: (collapsed: boolean) => void;
}
```

#### 3. CommentPanel
```typescript
interface CommentPanelProps {
  comments: Comment[];
  onAddComment?: (comment: string, selection: Selection) => void;
  onReplyComment?: (commentId: string, reply: string) => void;
}
```

## 测试策略

### 1. 视觉回归测试
- **截图对比**: 主要页面状态的截图测试
- **跨浏览器**: Chrome, Firefox, Safari, Edge
- **响应式**: 各断点的布局测试

### 2. 交互测试
- **动画流畅性**: 60fps 的动画性能
- **手势支持**: 移动端的触摸手势
- **键盘导航**: 完整的键盘操作流程

### 3. 可访问性测试
- **WCAG 2.1 AA**: 符合无障碍标准
- **屏幕阅读器**: VoiceOver, NVDA 测试
- **色盲友好**: 色盲模拟器测试

这个设计文档提供了文档中心模式的完整视觉和交互规范，确保实现的一致性和高质量的用户体验。 