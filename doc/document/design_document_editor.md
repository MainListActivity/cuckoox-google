# UI/UX 设计文档：增强型文档编辑器

## 1. 概述
本文档详细描述了“增强型文档编辑器”的用户界面 (UI) 和用户体验 (UX) 设计。设计遵循平台已有的规范，包括响应式布局、Tailwind CSS 实现、深色/亮色模式支持以及在线矢量图标库的使用。

## 2. 整体布局
编辑器采用灵活的多面板布局，旨在优化编辑效率和信息查阅的便捷性。

*   **顶部应用栏 (Header):**
    *   左侧：面包屑导航（指示文档来源，如 "案件 > 破-2023-001 > 立案材料"），文档标题（可编辑）。
    *   右侧：协作相关图标（如用户头像列表，未来功能），保存状态/按钮，分享按钮，更多操作菜单（如打印、导出、版本历史），以及标准的深色/亮色模式切换。
*   **主内容区 (Multi-Panel Layout):**
    *   **左侧面板 (可折叠/调整宽度):** 文档大纲。
    *   **中央面板 (主要工作区):**
        *   顶部：功能工具栏。
        *   下方：QuillJS 富文本编辑区域。
    *   **右侧面板 (可折叠/调整宽度):** 评论/批注列表。
    *   **底部面板 (可折叠/调整高度):** 文档扩展区域。

![Conceptual Layout Wireframe](https://via.placeholder.com/1200x800?text=Document+Editor+Layout+-+Outline(L)+Editor(C)+Comments(R)+Extension(B))
*(占位符：此处应为详细布局线框图)*

### 2.1 响应式设计
*   在较小屏幕上，左右侧面板可能会默认折叠，或转变为抽屉式菜单。
*   底部扩展区域在小屏幕上可能会占据更多垂直空间，或提供更明显的折叠/展开控制。
*   工具栏中的图标组可能会根据可用宽度进行折行或部分收入“更多”菜单。

### 2.2 深色/亮色模式
所有面板、按钮、文本、图标和编辑器本身（包括QuillJS的UI）都必须完全支持深色和亮色模式，确保对比度和可读性。

## 3. 功能工具栏 (Toolbar)
*   固定在中央编辑区域的顶部。
*   包含标准富文本编辑功能，分组排列，使用清晰的矢量图标。
    *   **撤销/重做:** `undo`, `redo`
    *   **格式刷:** (未来) `format_paint`
    *   **文本样式:** 加粗 (`format_bold`)，斜体 (`format_italic`)，下划线 (`format_underlined`)，删除线 (`strikethrough_s`)。
    *   **字体:** 字体族选择下拉菜单，字号选择下拉菜单。
    *   **颜色:** 文字颜色选择器 (`format_color_text`)，背景高亮颜色选择器 (`format_color_fill`)。
    *   **段落:**
        *   对齐方式 (`format_align_left`, `format_align_center`, `format_align_right`, `format_align_justify`)。
        *   列表 (`format_list_bulleted`, `format_list_numbered`)。
        *   缩进 (`format_indent_increase`, `format_indent_decrease`)。
        *   行高选择下拉。
    *   **插入:**
        *   图片 (`image`) - 触发文件上传至 MinIO。
        *   表格 (`table_chart`) - 触发简单表格插入。
        *   链接 (`link`)。
        *   水平线 (`horizontal_rule`)。
    *   **评论:** 添加评论 (`add_comment`) - 当文本被选中时激活。
    *   **清除格式:** `format_clear`。
*   工具栏按钮在悬停时应显示 Tooltip 解释功能。

## 4. 文档大纲面板 (Outline Panel - 左侧)
*   **显示:** 动态生成的文档标题层级列表 (H1, H2, H3 等)。
*   **交互:**
    *   点击条目，中央编辑区平滑滚动到对应章节。
    *   当前视口所在章节在大纲中高亮显示。
    *   面板顶部有折叠/展开按钮 (`menu_open` / `menu`)。

## 5. 编辑器区域 (Editor Area - 中央)
*   **QuillJS 实例:**
    *   提供流畅的输入和编辑体验。
    *   支持自定义内容高亮，用于指示被评论的文本范围。
*   **文本选择交互:**
    *   当用户在编辑器中选中文本时，“添加评论”按钮在工具栏中被激活。
    *   (可选) 选中文字后，可能会在选区附近出现一个小型浮动工具条，提供快速评论操作。

## 6. 评论/批注面板 (Commenting Panel - 右侧)
*   **显示:** 按时间顺序或文档顺序排列的评论卡片列表。
*   **评论卡片:**
    *   显示评论者头像（若有）、姓名、评论时间戳。
    *   显示评论内容文本。
    *   若有回复，则以层叠或缩进方式展示回复串。
    *   操作按钮/图标：回复 (`reply`)，解决 (`check_circle_outline`)，编辑 (`edit` - 仅自己)，删除 (`delete` - 仅自己或管理员)。
*   **添加新评论:**
    *   当用户通过工具栏或浮动按钮发起评论后，此面板可能会将焦点置于一个新的评论输入框，该输入框与当前选中的文本关联。
    *   输入框包含文本区域和“提交”、“取消”按钮。
*   **交互:**
    *   点击面板中的评论卡片，中央编辑区的对应已标记文本段落高亮并滚动到视图。
    *   已解决的评论可以被筛选隐藏或以半透明样式显示。
    *   面板顶部有折叠/展开按钮 (`comments` / `chevron_right`)。
*   **标记被评论文本:**
    *   在编辑器中，被评论的文本段落应有持久的视觉标记，例如**黄色细波浪下划线**。
    *   当对应的评论在右侧面板中被选中或悬停时，该下划线可以变为更明显的背景高亮 (e.g., `#FFF9C4` as currently used, or a light blue tint for dark mode).

## 7. 文档扩展区域面板 (Document Extension Area Panel - 底部)
*   **面板设计:**
    *   默认可折叠，占据编辑器底部一定高度（例如初始 200px-300px），用户可拖动调整其高度。
    *   面板标题栏：显示当前展示的信息类型（如“案件详情”），以及一个下拉菜单或一组标签页按钮用于切换不同的信息源。包含折叠/展开图标 (`expand_more` / `expand_less`)。
*   **内容选择控件:**
    *   例如，一个位于面板标题栏的下拉菜单，列出可用的信息模块：“案件基本信息”、“关联债权详情”、“相关法律条文”等。
    *   选择后，面板内容区动态加载并显示对应信息。
*   **内容显示模板:**
    *   **案件详情片段:**
        *   以只读卡片形式展示：案件编号、案件名称、当前阶段、受理法院、管理人、关键日期（受理日、公告日等）。
        *   使用清晰的标签和值对。
        *   样式应简洁，不干扰主要的文档编辑任务。
    *   **债权申报信息片段:**
        *   以只读卡片形式展示：债权人名称、申报编号、债权性质、申报金额、审核状态、审核认定金额。
        *   若有多个关联债权，可能以简略列表形式展示，点击可展开详情。
    *   所有模板需适配深色/亮色模式。
*   **交互与状态:**
    *   切换信息类型时，显示加载中状态 (如骨架屏或旋转加载器)。
    *   若无相关信息或加载失败，显示友好提示信息。
    *   内容区域可滚动（如果信息超出一屏）。

![Extension Area Wireframe](https://via.placeholder.com/1000x300?text=Extension+Area+-+Tabs/Dropdown+for+Content+Type)
*(占位符：此处应为扩展区域的线框图，展示内容切换和信息片段样式)*

## 8. 图标库与样式
*   **图标:** 统一使用 Material Icons (已引入)。
*   **颜色:** 遵循平台主色调（Teal 系列），并确保在深色/亮色模式下有良好对比度和可访问性。评论标记的黄色下划线应选择一个在两种模式下都清晰可辨的色号。
*   **字体:** Roboto，同平台。
*   **间距与对齐:** 遵循 Material Design 的间距指导原则，保持视觉平衡和一致性。

## 9. 动画与过渡
*   面板的折叠/展开应有平滑的动画过渡。
*   内容切换或加载时可使用淡入淡出效果。
*   动画应简洁高效，不影响性能。
