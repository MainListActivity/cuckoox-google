# 破产企业主体管理实现计划

- [ ] 1. 数据库表结构创建和权限配置
  - 创建破产企业主体表(bankruptcy_entity)及其字段定义
  - 创建案件企业关联关系表(has_bankruptcy_entity)
  - 创建债权企业关联关系表(claim_bankruptcy_entity)
  - 配置表权限和索引优化
  - _需求: 1.1, 2.1, 3.1, 4.1, 5.1_

- [ ] 2. 破产企业主体数据类型定义
  - 定义BankruptcyEntity核心数据类型
  - 定义EntityRecognitionResult识别结果类型
  - 定义EntityConflictResult冲突检测类型
  - 定义关系表相关的数据类型
  - _需求: 1.1, 2.1, 3.1, 4.1_

- [ ] 3. PDF解析服务扩展 - 文档类型识别
  - 扩展PDFParseService添加文档类型识别功能
  - 实现identifyDocumentType方法识别立案书和债权合同
  - 添加文档类型识别的置信度评估
  - 创建文档类型识别的单元测试
  - _需求: 1.1, 3.1_

- [ ] 4. PDF解析服务扩展 - 立案书解析
  - 实现parseFilingDocument方法解析立案书内容
  - 实现extractEntityInfo方法提取企业信息
  - 添加立案书解析结果的数据验证
  - 创建立案书解析功能的单元测试
  - _需求: 1.1, 1.2_

- [ ] 5. PDF解析服务扩展 - 债权合同解析
  - 实现parseContractDocument方法解析合同内容
  - 实现extractClaimInfo方法提取债权信息
  - 添加合同解析结果的数据验证和格式化
  - 创建债权合同解析功能的单元测试
  - _需求: 3.1, 3.2, 3.3_

- [ ] 6. 破产企业主体服务实现 - 基础CRUD操作
  - 实现BankruptcyEntityService的createEntity方法
  - 实现updateEntity和getEntity方法
  - 实现searchEntities方法支持企业搜索
  - 添加企业信息验证和重复检查逻辑
  - _需求: 1.3, 5.1, 5.2, 5.3_

- [ ] 7. 破产企业主体服务实现 - 关系管理
  - 实现associateWithCase方法使用RELATE语法关联企业到案件
  - 实现getCaseEntities方法查询案件关联的企业
  - 实现getEntityCases方法查询企业关联的案件
  - 实现updateEntityRelation和removeEntityFromCase方法
  - _需求: 1.4, 2.1, 2.2, 2.3_

- [ ] 8. 企业识别结果处理服务
  - 实现processRecognitionResult方法处理PDF识别结果
  - 实现checkEntityConflicts方法检测企业冲突
  - 实现verifyEntity方法支持企业信息验证
  - 添加识别结果的置信度评估和错误处理
  - _需求: 1.2, 1.3, 2.2, 7.1, 7.2_

- [ ] 9. 企业识别交互对话框组件
  - 创建EntityRecognitionDialog组件显示识别结果
  - 实现创建新企业和选择已有企业的交互逻辑
  - 添加企业信息表单验证和提交功能
  - 创建组件的单元测试和交互测试
  - _需求: 1.2, 1.3_

- [ ] 10. 企业选择和案件合并对话框组件
  - 创建EntitySelectionDialog组件支持企业选择
  - 创建CaseMergeDialog组件处理案件合并场景
  - 实现案件冲突检测和合并策略选择
  - 添加用户友好的冲突解决界面
  - _需求: 2.1, 2.2, 2.3_

- [ ] 11. 债权合同身份验证服务
  - 实现合同甲方身份验证逻辑
  - 实现合同乙方与案件主体匹配验证
  - 添加身份验证失败的错误处理和提示
  - 创建身份验证功能的单元测试
  - _需求: 4.1, 4.2, 4.3, 4.4_

- [ ] 12. 案件管理页面PDF上传集成
  - 在案件管理页面集成PDF上传组件
  - 实现立案书上传后的企业识别流程
  - 添加企业创建/选择后的案件信息填充
  - 集成案件合并功能到案件创建流程
  - _需求: 1.1, 1.2, 1.3, 1.4, 2.1, 2.2, 2.3, 2.4_

- [ ] 13. 债权申报页面PDF上传集成
  - 在债权申报页面集成PDF上传组件
  - 实现债权合同上传后的信息提取和验证
  - 添加债权信息自动填充到申报表单
  - 集成身份验证和错误处理流程
  - _需求: 3.1, 3.2, 3.3, 3.4, 4.1, 4.2, 4.3, 4.4_

- [ ] 14. 企业信息查看和管理界面
  - 创建企业详情页面显示完整企业信息
  - 在案件详情页面添加关联企业列表
  - 实现企业信息编辑和更新功能
  - 添加企业与债权的关联关系显示
  - _需求: 5.1, 5.2, 5.3, 5.4, 6.1, 6.2, 6.3_

- [ ] 15. 权限控制和操作审计
  - 为破产企业相关操作添加权限检查
  - 实现企业信息修改的审计日志记录
  - 添加敏感信息的访问控制
  - 创建权限控制的集成测试
  - _需求: 5.4, 7.1, 7.2, 7.3, 7.4_

- [ ] 16. PDF识别准确性监控和优化
  - 实现识别结果的置信度记录和统计
  - 添加用户修正识别结果的反馈机制
  - 创建识别准确率统计和报告功能
  - 实现低置信度结果的人工审核标记
  - _需求: 7.1, 7.2, 7.3, 7.4_

- [ ] 17. 错误处理和用户体验优化
  - 实现完整的错误处理和用户友好的错误提示
  - 添加PDF识别失败时的手动输入选项
  - 优化加载状态和进度指示器
  - 添加操作成功的确认反馈
  - _需求: 1.4, 2.4, 3.4, 4.4, 6.4_

- [ ] 18. 集成测试和端到端测试
  - 创建立案书识别完整流程的端到端测试
  - 创建债权合同识别完整流程的端到端测试
  - 测试企业冲突检测和案件合并场景
  - 测试权限控制和数据安全功能
  - _需求: 所有需求的集成验证_