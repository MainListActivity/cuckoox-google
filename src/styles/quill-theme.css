/* src/styles/quill-theme.css */
:root {
  --color-primary: #009688; /* Teal 500 */
  --color-primary-light: #4DB6AC; /* Teal 300 */
  --color-primary-dark: #00796B; /* Teal 700 */
  
  --color-surface: #FFFFFF; /* For toolbars, dropdowns, card backgrounds */
  --color-background: #FBFCFC; /* Editor area background - slightly off-white */
  /* --color-background: #f6f6f6; /* Alternative: Match main page background from UI设计.md */

  --color-text-primary: #212121; /* Grey 900 - For main text content */
  --color-text-secondary: #616161; /* Grey 700 - For icons, secondary labels */
  --color-text-hint: #9E9E9E; /* Grey 500 - For placeholder text */
  --color-text-on-primary: #FFFFFF; /* For text on primary-colored backgrounds */
  --color-text-disabled: #BDBDBD; /* Grey 400 */

  --color-border-light: #E0E0E0; /* Grey 300 */
  --color-border-dark: #BDBDBD; /* Grey 400 - For dropdown borders etc. */
  --color-border-disabled: #EEEEEE; /* Grey 200 */

  --color-action-hover: #F5F5F5; /* Grey 100 - Subtle hover */
  --color-action-selected: rgba(0, 150, 136, 0.12); /* Teal 500 with 12% alpha */
  --color-action-selected-strong: rgba(0, 150, 136, 0.20); /* Teal 500 with 20% alpha */


  --color-background-disabled: #F5F5F5; /* Grey 100 */
  --color-background-disabled-light: #FAFAFA; /* Grey 50 */
  
  --color-shadow-umbra: rgba(0, 0, 0, 0.2);
  --color-shadow-penumbra: rgba(0, 0, 0, 0.14);
  --color-shadow-ambient: rgba(0, 0, 0, 0.12);

  --elevation-dp1: 0px 1px 3px 0px var(--color-shadow-umbra), 0px 1px 1px 0px var(--color-shadow-penumbra), 0px 2px 1px -1px var(--color-shadow-ambient);
  --elevation-dp2: 0px 2px 4px -1px var(--color-shadow-umbra), 0px 4px 5px 0px var(--color-shadow-penumbra), 0px 1px 10px 0px var(--color-shadow-ambient);
  --elevation-dp4: 0px 3px 5px -1px var(--color-shadow-umbra), 0px 6px 10px 0px var(--color-shadow-penumbra), 0px 1px 18px 0px var(--color-shadow-ambient);
}

/* Google Docs inspired modern toolbar styling */
.ql-toolbar.ql-snow {
  background-color: var(--color-surface);
  border: none;
  border-bottom: 1px solid var(--color-border-light);
  border-radius: 0;
  padding: 8px 16px;
  box-sizing: border-box;
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  min-height: 48px;
  align-items: center;
  position: sticky;
  top: 0;
  z-index: 100;
  box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.1);
}

.ql-snow .ql-formats {
  display: inline-flex;
  align-items: center;
  margin-right: 8px;
  padding-right: 8px;
  border-right: 1px solid var(--color-border-light);
  gap: 2px;
}

.ql-snow .ql-formats:last-child {
  border-right: none;
  margin-right: 0;
  padding-right: 0;
}

/* Modern container styling */
.ql-container.ql-snow {
  border: none;
  border-radius: 0;
  background-color: transparent;
  font-family: 'Google Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  line-height: 1.6;
}

/* Google Docs style editor area */
.ql-editor {
  background-color: #ffffff;
  color: var(--color-text-primary);
  min-height: 500px;
  padding: 48px 48px 200px 48px;
  margin: 0;
  font-size: 16px;
  line-height: 1.6;
  font-family: 'Google Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  outline: none;
  box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);
  border-radius: 8px;
  margin: 16px auto;
  max-width: 100%;
  position: relative;
}

/* Mobile responsive padding */
@media (max-width: 768px) {
  .ql-editor {
    padding: 24px 16px 150px 16px;
    font-size: 14px;
  }
  
  .ql-toolbar.ql-snow {
    padding: 8px 12px;
    gap: 2px;
  }
}

/* Modern placeholder styling */
.ql-editor.ql-blank::before {
  color: var(--color-text-hint);
  font-style: normal;
  left: 48px;
  right: 48px;
  font-size: 16px;
  font-weight: 400;
}

@media (max-width: 768px) {
  .ql-editor.ql-blank::before {
    left: 16px;
    right: 16px;
    font-size: 14px;
  }
}

/* Modern toolbar buttons */
.ql-snow .ql-toolbar button,
.ql-snow.ql-toolbar button,
.ql-snow .ql-picker,
.ql-snow.ql-toolbar .ql-picker {
  background-color: transparent;
  border: none;
  border-radius: 6px;
  padding: 4px;
  margin: 0 1px;
  cursor: pointer;
  outline: none;
  transition: all 0.2s ease;
  height: 32px;
  width: 32px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  position: relative;
}

/* Specific padding overrides for header and color pickers */
.ql-snow .ql-picker.ql-header,
.ql-snow.ql-toolbar .ql-picker.ql-header {
  padding: 0px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: auto;
  min-width: 80px;
}

.ql-snow .ql-picker.ql-color,
.ql-snow.ql-toolbar .ql-picker.ql-color,
.ql-snow .ql-picker.ql-background,
.ql-snow.ql-toolbar .ql-picker.ql-background {
  padding: 0px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
}

/* Header picker label specific styling */
.ql-snow .ql-picker.ql-header .ql-picker-label {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  padding: 0 8px;
  text-align: center;
}

/* Color picker label specific styling */
.ql-snow .ql-picker.ql-color .ql-picker-label,
.ql-snow .ql-picker.ql-background .ql-picker-label {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  padding: 0;
}

/* Hover effects */
.ql-snow .ql-toolbar button:hover,
.ql-snow.ql-toolbar button:hover,
.ql-snow .ql-picker:hover,
.ql-snow.ql-toolbar .ql-picker:hover {
  background-color: var(--color-action-hover);
  border-radius: 6px;
}

.ql-snow .ql-toolbar button:hover .ql-stroke,
.ql-snow.ql-toolbar button:hover .ql-stroke,
.ql-snow .ql-picker:hover .ql-stroke {
  stroke: var(--color-primary);
}

.ql-snow .ql-toolbar button:hover .ql-fill,
.ql-snow.ql-toolbar button:hover .ql-fill,
.ql-snow .ql-picker:hover .ql-fill {
  fill: var(--color-primary);
}

/* Active state styling */
.ql-snow .ql-toolbar button.ql-active,
.ql-snow.ql-toolbar button.ql-active,
.ql-snow .ql-picker.ql-expanded,
.ql-snow.ql-toolbar .ql-picker.ql-expanded {
  background-color: var(--color-action-selected);
  border-radius: 6px;
}

.ql-snow .ql-toolbar button.ql-active .ql-stroke,
.ql-snow.ql-toolbar button.ql-active .ql-stroke,
.ql-snow .ql-picker.ql-expanded .ql-stroke {
  stroke: var(--color-primary);
}

.ql-snow .ql-toolbar button.ql-active .ql-fill,
.ql-snow.ql-toolbar button.ql-active .ql-fill,
.ql-snow .ql-picker.ql-expanded .ql-fill {
  fill: var(--color-primary);
}

/* Icon styling */
.ql-snow .ql-stroke {
  stroke: var(--color-text-secondary);
  transition: stroke 0.2s ease;
  stroke-width: 1.5;
}

.ql-snow .ql-fill {
  fill: var(--color-text-secondary);
  transition: fill 0.2s ease;
}

.ql-snow line.ql-stroke {
    stroke: var(--color-text-secondary);
}

.ql-snow button.ql-active line.ql-stroke {
    stroke: var(--color-primary);
}

.ql-snow button:hover line.ql-stroke {
    stroke: var(--color-primary);
}

/* Modern picker label styling */
.ql-snow .ql-picker-label {
  color: var(--color-text-secondary);
  transition: color 0.2s ease;
  font-size: 14px;
  font-weight: 500;
}

/* Default padding for non-specific picker labels */
.ql-snow .ql-picker:not(.ql-header):not(.ql-color):not(.ql-background) .ql-picker-label {
  padding-right: 4px;
}

.ql-snow .ql-picker:not(.ql-color-picker):not(.ql-background-picker):not(.ql-header) {
  width: auto;
  padding-left: 12px;
  padding-right: 12px;
  min-width: 80px;
}

.ql-snow .ql-picker.ql-header .ql-picker-label,
.ql-snow .ql-picker.ql-font .ql-picker-label,
.ql-snow .ql-picker.ql-size .ql-picker-label {
    max-width: 120px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-weight: 500;
}

/* Modern dropdown styling */
.ql-snow .ql-picker-options {
  background-color: var(--color-surface);
  border: 1px solid var(--color-border-light);
  border-radius: 8px;
  box-shadow: var(--elevation-dp4);
  padding: 8px 0;
  margin-top: 4px;
  z-index: 1000;
}

.ql-snow .ql-picker-options .ql-picker-item {
  padding: 8px 16px;
  transition: background-color 0.2s ease;
  border-radius: 0;
  font-size: 14px;
}

.ql-snow .ql-picker-options .ql-picker-item:hover {
  background-color: var(--color-action-hover);
}

.ql-snow .ql-picker-options .ql-picker-item.ql-selected,
.ql-snow .ql-picker-options .ql-picker-item:active {
  background-color: var(--color-action-selected);
  color: var(--color-primary);
}

/* Color picker styling */
.ql-snow .ql-picker.ql-color-picker .ql-picker-label,
.ql-snow .ql-picker.ql-background-picker .ql-picker-label {
  border: 1px solid var(--color-border-light);
  border-radius: 4px;
}

.ql-snow .ql-color-picker .ql-picker-label svg,
.ql-snow .ql-background-picker .ql-picker-label svg {
  margin: 2px;
}

.ql-snow .ql-color-picker .ql-picker-label[value]::before,
.ql-snow .ql-background-picker .ql-picker-label[value]::before {
  border-radius: 2px;
}

.ql-snow .ql-picker.ql-color-picker .ql-picker-options,
.ql-snow .ql-picker.ql-background-picker .ql-picker-options {
  padding: 8px;
}

.ql-snow .ql-picker.ql-color-picker .ql-picker-item,
.ql-snow .ql-picker.ql-background-picker .ql-picker-item {
  border: none;
  border-radius: 4px;
  margin: 2px;
  transition: transform 0.2s ease;
}

.ql-snow .ql-picker.ql-color-picker .ql-picker-item:hover,
.ql-snow .ql-picker.ql-background-picker .ql-picker-item:hover {
  transform: scale(1.1);
}

/* Disabled state */
.ql-disabled .ql-toolbar {
  opacity: 0.6;
  pointer-events: none;
}

.ql-disabled .ql-container {
  opacity: 0.8;
}

.ql-disabled .ql-editor {
  background-color: var(--color-background-disabled-light);
  color: var(--color-text-disabled);
}

.ql-disabled .ql-editor.ql-blank::before {
  color: var(--color-text-disabled);
}

/* Link styling */
.ql-editor a {
  color: var(--color-primary);
  text-decoration: none;
  border-bottom: 1px solid transparent;
  transition: border-bottom-color 0.2s ease;
}

.ql-editor a:hover {
  border-bottom-color: var(--color-primary);
}

/* Image styling */
.ql-editor img {
  max-width: 100%;
  height: auto;
  border-radius: 8px;
  box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);
  margin: 16px 0;
}

/* File attachment styling */
.ql-editor a[data-file-attachment="true"] {
  display: inline-flex;
  align-items: center;
  background-color: var(--color-action-hover);
  color: var(--color-text-primary);
  padding: 8px 12px;
  border-radius: 6px;
  text-decoration: none;
  margin: 4px 0;
  border: 1px solid var(--color-border-light);
  transition: all 0.2s ease;
}

.ql-editor a[data-file-attachment="true"]:hover {
  background-color: var(--color-action-selected);
  border-color: var(--color-primary);
  color: var(--color-primary);
  transform: translateY(-1px);
  box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);
}

.ql-editor a[data-file-attachment="true"]::before {
  content: '📎';
  margin-right: 8px;
  font-size: 16px;
}

/* Custom attach button icon */
.ql-snow .ql-toolbar button.ql-attach .ql-stroke path,
.ql-snow.ql-toolbar button.ql-attach .ql-stroke path {
  stroke: var(--color-text-secondary);
  stroke-width: 1.5;
  transition: stroke 0.2s ease;
}

/* Font family display names */
.ql-snow .ql-picker.ql-font .ql-picker-label[data-value="Arial"]::before,
.ql-snow .ql-picker.ql-font .ql-picker-options .ql-picker-item[data-value="Arial"]::before {
  content: 'Arial';
}

.ql-snow .ql-picker.ql-font .ql-picker-label[data-value="Verdana"]::before,
.ql-snow .ql-picker.ql-font .ql-picker-options .ql-picker-item[data-value="Verdana"]::before {
  content: 'Verdana';
}

.ql-snow .ql-picker.ql-font .ql-picker-label[data-value="Times New Roman"]::before,
.ql-snow .ql-picker.ql-font .ql-picker-options .ql-picker-item[data-value="Times New Roman"]::before {
  content: 'Times New Roman';
}

.ql-snow .ql-picker.ql-font .ql-picker-label[data-value="Roboto"]::before,
.ql-snow .ql-picker.ql-font .ql-picker-options .ql-picker-item[data-value="Roboto"]::before {
  content: 'Roboto';
}

/* Direction support */
.ql-snow .ql-direction svg {
  height: 18px;
  width: 18px;
}

/* Remote cursor styles for collaboration */
.remote-cursor {
  pointer-events: none;
}

.remote-cursor-name {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  font-size: 12px;
  font-weight: 500;
  letter-spacing: 0.5px;
}

.remote-selection {
  pointer-events: none;
  border-radius: 2px;
}

/* Dark mode support */
[data-theme="dark"] {
  --color-surface: #2d2d2d;
  --color-background: #1e1e1e;
  --color-text-primary: #ffffff;
  --color-text-secondary: #b3b3b3;
  --color-text-hint: #666666;
  --color-border-light: #404040;
  --color-action-hover: rgba(255, 255, 255, 0.08);
  --color-action-selected: rgba(0, 150, 136, 0.16);
  --color-background-disabled: #333333;
  --color-background-disabled-light: #2a2a2a;
  --color-text-disabled: #666666;
}

[data-theme="dark"] .ql-editor {
  background-color: #2d2d2d;
  color: #ffffff;
  box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.3);
}

[data-theme="dark"] .ql-toolbar.ql-snow {
  background-color: #2d2d2d;
  border-bottom-color: #404040;
  box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.3);
}

/* Animation and transitions */
.ql-toolbar.ql-snow,
.ql-editor {
  transition: all 0.3s ease;
}

/* Focus state */
.ql-container.ql-snow:focus-within .ql-editor {
  box-shadow: 0px 4px 12px rgba(0, 150, 136, 0.15);
}
